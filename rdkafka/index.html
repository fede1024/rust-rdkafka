<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `rdkafka` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, rdkafka">

    <title>rdkafka - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">
    
    <link rel="stylesheet" type="text/css" href="../dark.css">
    <link rel="stylesheet" type="text/css" href="../main.css" id="themeStyle">
    <script src="../storage.js"></script>
    

    
    
</head>
<body class="rustdoc mod">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <div class="sidebar-menu">&#9776;</div>
        
        <p class='location'>Crate rdkafka</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'rdkafka', ty: 'mod', relpath: '../'};</script></div>
    </nav>

    <div class="theme-picker">
        <button id="theme-picker" aria-label="Pick another theme!">
            <img src="../brush.svg" width="18" alt="Pick another theme!">
        </button>
        <div id="theme-choices"></div>
    </div>
    <script src="../theme.js"></script>
    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Crate <a class="mod" href=''>rdkafka</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/rdkafka/lib.rs.html#1-247' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><h1 id="rust-rdkafka" class="section-header"><a href="#rust-rdkafka">rust-rdkafka</a></h1>
<p>A fully asynchronous, <a href="https://github.com/alexcrichton/futures-rs">futures</a>-based Kafka client library for Rust based on <a href="https://github.com/edenhill/librdkafka">librdkafka</a>.</p>
<h2 id="the-library" class="section-header"><a href="#the-library">The library</a></h2>
<p><code>rust-rdkafka</code> provides a safe Rust interface to librdkafka. The master branch is currently based on librdkafka 0.11.3.</p>
<h3 id="documentation" class="section-header"><a href="#documentation">Documentation</a></h3>
<ul>
<li><a href="https://fede1024.github.io/rust-rdkafka/">Current master branch</a></li>
<li><a href="https://docs.rs/rdkafka/">Latest release</a></li>
<li><a href="https://github.com/fede1024/rust-rdkafka/blob/master/changelog.md">Changelog</a></li>
</ul>
<h3 id="features" class="section-header"><a href="#features">Features</a></h3>
<p>The main features provided at the moment are:</p>
<ul>
<li>Support for all Kafka versions since 0.8.x. For more information about broker compatibility options, check the <a href="https://github.com/edenhill/librdkafka/wiki/Broker-version-compatibility">librdkafka documentation</a>.</li>
<li>Consume from single or multiple topics.</li>
<li>Automatic consumer rebalancing.</li>
<li>Customizable rebalance, with pre and post rebalance callbacks.</li>
<li>Synchronous or asynchronous message production.</li>
<li>Customizable offset commit.</li>
<li>Access to cluster metadata (list of topic-partitions, replicas, active brokers etc).</li>
<li>Access to group metadata (list groups, list members of groups, hostnames etc).</li>
<li>Access to producer and consumer metrics, errors and callbacks.</li>
</ul>
<h3 id="one-million-messages-per-second" class="section-header"><a href="#one-million-messages-per-second">One million messages per second</a></h3>
<p><code>rust-rdkafka</code> is designed to be easy and safe to use thanks to the abstraction layer written in Rust, while at the same time being extremely fast thanks to the librdkafka C library.</p>
<p>Here are some benchmark results using the rust-rdkafka <code>BaseProducer</code>, sending data to a single Kafka 0.11 process running in localhost (default configuration, 3 partitions). Hardware: Dell laptop, with Intel Core i7-4712HQ @ 2.30GHz.</p>
<ul>
<li>
<p>Scenario: produce 5 million messages, 10 bytes each, wait for all of them to be acked</p>
<ul>
<li>1045413 messages/s, 9.970 MB/s  (average over 5 runs)</li>
</ul>
</li>
<li>
<p>Scenario: produce 100000 messages, 10 KB each, wait for all of them to be acked</p>
<ul>
<li>24623 messages/s, 234.826 MB/s  (average over 5 runs)</li>
</ul>
</li>
</ul>
<p>For more numbers, check out the <a href="https://github.com/fede1024/kafka-benchmark">kafka-benchmark</a> project.</p>
<h3 id="client-types" class="section-header"><a href="#client-types">Client types</a></h3>
<p><code>rust-rdkafka</code> provides low level and high level consumers and producers. Low level:</p>
<ul>
<li><a href="consumer/base_consumer/struct.BaseConsumer.html"><code>BaseConsumer</code></a>: simple wrapper around the librdkafka consumer. It requires to be periodically <code>poll()</code>ed in order to execute callbacks, rebalances and to receive messages.</li>
<li><a href="producer/base_producer/struct.BaseProducer.html"><code>BaseProducer</code></a>: simple wrapper around the librdkafka producer. As in the consumer case, the user must call <code>poll()</code> periodically to execute delivery callbacks.</li>
<li><a href="producer/base_producer/struct.ThreadedProducer.html"><code>ThreadedProducer</code></a>: <code>BaseProducer</code> with a separate thread dedicated to polling the producer.</li>
</ul>
<p>High level:</p>
<ul>
<li><a href="consumer/stream_consumer/struct.StreamConsumer.html"><code>StreamConsumer</code></a>: it returns a <a href="https://docs.rs/futures/0.1.3/futures/stream/trait.Stream.html"><code>stream</code></a> of messages and takes care of polling the consumer internally.</li>
<li><a href="producer/future_producer/struct.FutureProducer.html"><code>FutureProducer</code></a>: it returns a <a href="https://docs.rs/futures/0.1.3/futures/trait.Future.html"><code>future</code></a> that will be completed once the message is delivered to Kafka (or failed).</li>
</ul>
<p>For more information about consumers and producers, refer to their module-level documentation.</p>
<p><em>Warning</em>: the library is under active development and the APIs are likely to change.</p>
<h3 id="asynchronous-data-processing-with-tokio-rs" class="section-header"><a href="#asynchronous-data-processing-with-tokio-rs">Asynchronous data processing with tokio-rs</a></h3>
<p><a href="https://tokio.rs/">tokio-rs</a> is a platform for fast processing of asynchronous events in Rust. The interfaces exposed by the <a href="consumer/stream_consumer/struct.StreamConsumer.html"><code>StreamConsumer</code></a> and the <a href="producer/future_producer/struct.FutureProducer.html"><code>FutureProducer</code></a> allow rust-rdkafka users to easily integrate Kafka consumers and producers within the tokio-rs platform, and write asynchronous message processing code. Note that rust-rdkafka can be used without tokio-rs.</p>
<p>To see rust-rdkafka in action with tokio-rs, check out the <a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/asynchronous_processing.rs">asynchronous processing example</a> in the examples folder.</p>
<h3 id="at-least-once-delivery" class="section-header"><a href="#at-least-once-delivery">At-least-once delivery</a></h3>
<p>At-least-once delivery semantic is common in many streaming applications: every message is guaranteed to be processed at least once; in case of temporary failure, the message can be re-processed and/or re-delivered, but no message will be lost.</p>
<p>In order to implement at-least-once delivery the stream processing application has to carefully commit the offset only once the message has been processed. Committing the offset too early, instead, might cause message loss, since upon recovery the consumer will start from the next message, skipping the one where the failure occurred.</p>
<p>To see how to implement at-least-once delivery with <code>rdkafka</code>, check out the <a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/at_least_once.rs">at-least-once delivery example</a> in the examples folder. To know more about delivery semantics, check the <a href="https://kafka.apache.org/0101/documentation.html#semantics">message delivery semantics</a> chapter in the Kafka documentation.</p>
<h3 id="users" class="section-header"><a href="#users">Users</a></h3>
<p>Here are some of the projects using rust-rdkafka:</p>
<ul>
<li><a href="https://github.com/frankmcsherry/timely-dataflow">timely-dataflow</a>: a modular implementation of timely dataflow in Rust (you can also check the <a href="https://github.com/frankmcsherry/blog/blob/master/posts/2017-11-08.md">blog post</a>).</li>
<li><a href="https://github.com/fede1024/kafka-view">kafka-view</a>: a web interface for Kafka clusters.</li>
<li><a href="https://github.com/fede1024/kafka-benchmark">kafka-benchmark</a>: a high performance benchmarking tool for Kafka.</li>
</ul>
<p><em>If you are using rust-rdkafka, please let me know!</em></p>
<h2 id="installation" class="section-header"><a href="#installation">Installation</a></h2>
<p>Add this to your <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[dependencies]
rdkafka = &quot;0.15.0&quot;
</code></pre>
<p>This crate will compile librdkafka from sources and link it statically to your executable. To compile librdkafka you'll need:</p>
<ul>
<li>the GNU toolchain</li>
<li>GNU <code>make</code></li>
<li><code>pthreads</code></li>
<li><code>zlib</code></li>
<li><code>libssl-dev</code>: optional, <em>not</em> included by default (feature: <code>ssl</code>).</li>
<li><code>libsasl2-dev</code>: optional, <em>not</em> included by default (feature: <code>sasl</code>).</li>
</ul>
<p>To enable ssl and sasl, use the <code>features</code> field in <code>Cargo.toml</code>. Example:</p>
<pre><code class="language-toml">[dependencies.rdkafka]
version = &quot;0.15.0&quot;
features = [&quot;ssl&quot;, &quot;sasl&quot;]
</code></pre>
<p>By default a submodule with the librdkafka sources pinned to a specific commit will
be used to compile and statically link the library.</p>
<p>The <code>dynamic_linking</code> feature can be used to link rdkafka to a locally installed
version of librdkafka: if the feature is enabled, the build script will use <code>pkg-config</code>
to check the version of the library installed in the system, and it will configure the
compiler to use dynamic linking.</p>
<h2 id="compiling-from-sources" class="section-header"><a href="#compiling-from-sources">Compiling from sources</a></h2>
<p>To compile from sources, you'll have to update the submodule containing librdkafka:</p>
<pre><code class="language-bash">git submodule update --init
</code></pre>
<p>and then compile using <code>cargo</code>, selecting the features that you want. Example:</p>
<pre><code class="language-bash">cargo build --features &quot;ssl sasl&quot;
</code></pre>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<p>You can find examples in the <code>examples</code> folder. To run them:</p>
<pre><code class="language-bash">cargo run --example &lt;example_name&gt; -- &lt;example_args&gt;
</code></pre>
<h2 id="tests" class="section-header"><a href="#tests">Tests</a></h2><h3 id="unit-tests" class="section-header"><a href="#unit-tests">Unit tests</a></h3>
<p>The unit tests can run without a Kafka broker present:</p>
<pre><code class="language-bash">cargo test --lib
</code></pre>
<h3 id="automatic-testing" class="section-header"><a href="#automatic-testing">Automatic testing</a></h3>
<p>rust-rdkafka contains a suite of tests which is automatically executed by travis in
docker-compose. Given the interaction with C code that rust-rdkafka has to do, tests
are executed in valgrind to check eventual memory errors and leaks.</p>
<p>To run the full suite using docker-compose:</p>
<pre><code class="language-bash">./test_suite.sh
</code></pre>
<p>To run locally, instead:</p>
<pre><code class="language-bash">KAFKA_HOST=&quot;kafka_server:9092&quot; cargo test
</code></pre>
<p>In this case there is a broker expected to be running on <code>KAFKA_HOST</code>.
The broker must be configured with default partition number 3 and topic autocreation in order
for the tests to succeed.</p>
<h2 id="debugging" class="section-header"><a href="#debugging">Debugging</a></h2>
<p>rust-rdkafka uses the <code>log</code> and <code>env_logger</code> crates to handle logging. Logging can be enabled
using the <code>RUST_LOG</code> environment variable, for example:</p>
<pre><code class="language-bash">RUST_LOG=&quot;librdkafka=trace,rdkafka::client=debug&quot; cargo test
</code></pre>
<p>This will configure the logging level of librdkafka to trace, and the level of the client
module of the Rust client to debug. To actually receive logs from librdkafka, you also have to
set the <code>debug</code> option in the producer or consumer configuration (see librdkafka
<a href="https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION.md">configuration</a>).</p>
<p>To enable debugging in your project, make sure you initialize the logger with
<code>env_logger::init()</code> or equivalent.</p>
</div><h2 id='reexports' class='section-header'><a href="#reexports">Re-exports</a></h2>
<table><tr><td><code>pub use client::<a class="trait" href="../rdkafka/client/trait.ClientContext.html" title="trait rdkafka::client::ClientContext">ClientContext</a>;</code></td></tr><tr><td><code>pub use config::<a class="struct" href="../rdkafka/config/struct.ClientConfig.html" title="struct rdkafka::config::ClientConfig">ClientConfig</a>;</code></td></tr><tr><td><code>pub use message::<a class="trait" href="../rdkafka/message/trait.Message.html" title="trait rdkafka::message::Message">Message</a>;</code></td></tr><tr><td><code>pub use message::<a class="enum" href="../rdkafka/message/enum.Timestamp.html" title="enum rdkafka::message::Timestamp">Timestamp</a>;</code></td></tr><tr><td><code>pub use statistics::<a class="struct" href="../rdkafka/statistics/struct.Statistics.html" title="struct rdkafka::statistics::Statistics">Statistics</a>;</code></td></tr><tr><td><code>pub use topic_partition_list::<a class="enum" href="../rdkafka/topic_partition_list/enum.Offset.html" title="enum rdkafka::topic_partition_list::Offset">Offset</a>;</code></td></tr><tr><td><code>pub use topic_partition_list::<a class="struct" href="../rdkafka/topic_partition_list/struct.TopicPartitionList.html" title="struct rdkafka::topic_partition_list::TopicPartitionList">TopicPartitionList</a>;</code></td></tr><tr><td><code>pub use util::<a class="trait" href="../rdkafka/util/trait.IntoOpaque.html" title="trait rdkafka::util::IntoOpaque">IntoOpaque</a>;</code></td></tr></table><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="mod" href="client/index.html"
                                  title='mod rdkafka::client'>client</a></td>
                           <td class='docblock-short'>
                                <p>Common client functionalities.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="config/index.html"
                                  title='mod rdkafka::config'>config</a></td>
                           <td class='docblock-short'>
                                <p>Producer and consumer configuration.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="consumer/index.html"
                                  title='mod rdkafka::consumer'>consumer</a></td>
                           <td class='docblock-short'>
                                <p>Base trait and common functionality for all consumers.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="error/index.html"
                                  title='mod rdkafka::error'>error</a></td>
                           <td class='docblock-short'>
                                <p>Error manipulations.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="groups/index.html"
                                  title='mod rdkafka::groups'>groups</a></td>
                           <td class='docblock-short'>
                                <p>Group membership API.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="message/index.html"
                                  title='mod rdkafka::message'>message</a></td>
                           <td class='docblock-short'>
                                <p>Store and manipulate Kafka messages.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="metadata/index.html"
                                  title='mod rdkafka::metadata'>metadata</a></td>
                           <td class='docblock-short'>
                                <p>Cluster metadata.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="producer/index.html"
                                  title='mod rdkafka::producer'>producer</a></td>
                           <td class='docblock-short'>
                                <p>Low level and high level rdkafka producers.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="statistics/index.html"
                                  title='mod rdkafka::statistics'>statistics</a></td>
                           <td class='docblock-short'>
                                
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="topic_partition_list/index.html"
                                  title='mod rdkafka::topic_partition_list'>topic_partition_list</a></td>
                           <td class='docblock-short'>
                                <p>A data structure representing topic, partitions and offsets, compatible with the
<code>RDKafkaTopicPartitionList</code> exported by <code>rdkafka-sys</code>.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="types/index.html"
                                  title='mod rdkafka::types'>types</a></td>
                           <td class='docblock-short'>
                                <p>This module contains type aliases for types defined in the auto-generated bindings.</p>

                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="util/index.html"
                                  title='mod rdkafka::util'>util</a></td>
                           <td class='docblock-short'>
                                <p>Utility functions</p>

                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt><kbd>?</kbd></dt>
                    <dd>Show this help dialog</dd>
                    <dt><kbd>S</kbd></dt>
                    <dd>Focus the search field</dd>
                    <dt><kbd>↑</kbd></dt>
                    <dd>Move up in search results</dd>
                    <dt><kbd>↓</kbd></dt>
                    <dd>Move down in search results</dd>
                    <dt><kbd>↹</kbd></dt>
                    <dd>Switch tab</dd>
                    <dt><kbd>&#9166;</kbd></dt>
                    <dd>Go to active search result</dd>
                    <dt><kbd>+</kbd></dt>
                    <dd>Expand all sections</dd>
                    <dt><kbd>-</kbd></dt>
                    <dd>Collapse all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "rdkafka";
    </script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>